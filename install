#!/bin/bash

# Cursor GNOME Installer

set -e

echo "ðŸš€ Instalando Cursor GNOME Update..."

# Criar diretÃ³rio temporÃ¡rio
TEMP_DIR="/tmp/cursor-gnome-update-install"
rm -rf "$TEMP_DIR"
mkdir -p "$TEMP_DIR"
cd "$TEMP_DIR"

# Baixar arquivos necessÃ¡rios
echo "ðŸ“¥ Baixando arquivos..."
curl -fsSL https://raw.githubusercontent.com/Muriel-Gasparini/cursor-gnome-update/main/install-cursor.sh > install-cursor.sh
curl -fsSL https://raw.githubusercontent.com/Muriel-Gasparini/cursor-gnome-update/main/update-cursor.sh > update-cursor.sh
curl -fsSL https://raw.githubusercontent.com/Muriel-Gasparini/cursor-gnome-update/main/Cursor.template.desktop > Cursor.template.desktop
curl -fsSL https://raw.githubusercontent.com/Muriel-Gasparini/cursor-gnome-update/main/cursor-icon.jpg > cursor-icon.jpg

# Dar permissÃµes
chmod +x install-cursor.sh update-cursor.sh

# Criar comando global
echo "âš™ï¸ Configurando comando global..."
sudo tee /usr/local/bin/update-cursor > /dev/null << EOF
#!/bin/bash
cd "$TEMP_DIR"
./install-cursor.sh "\$@"
EOF

sudo chmod +x /usr/local/bin/update-cursor

echo "âœ… InstalaÃ§Ã£o concluÃ­da!"
echo ""
echo "ðŸŽ¯ Use: update-cursor"
echo "ðŸ—‘ï¸ Desinstalar: sudo rm /usr/local/bin/update-cursor && rm -rf $TEMP_DIR"

# Executar primeira instalaÃ§Ã£o
echo ""
echo "ðŸ”„ Executando primeira instalaÃ§Ã£o..."
update-cursor 